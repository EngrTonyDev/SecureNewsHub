{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\m_jim\\\\Desktop\\\\isw711\\\\frontend\\\\src\\\\components\\\\VerifyPhoneCodeModal.js\";\nimport { Modal, ModalBody, ModalFooter, ModalHeader } from 'reactstrap';\nimport React, { Component } from 'react';\nimport { verifyPhoneCode } from '../services/AuthService';\nimport { withRouter } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass VerifyPhoneCodeModal extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      code: '',\n      error: {\n        show: false,\n        msg: ''\n      }\n    };\n\n    this.handleChangeInput = e => {\n      this.setState({\n        code: e.target.value\n      });\n    };\n\n    this.handleCloseModal = () => {\n      this.props.handleCloseModal();\n    };\n\n    this.handleVerifyCode = async () => {\n      await this.setState({\n        error: {\n          show: false,\n          msg: ''\n        }\n      });\n      const {\n        code\n      } = this.state;\n\n      if (!code || code.trim() === '') {\n        return;\n      }\n\n      const {\n        error,\n        data,\n        msg\n      } = await verifyPhoneCode({\n        email: this.props.email,\n        phoneCode: code\n      });\n\n      if (error) {\n        this.setState({\n          error: {\n            show: true,\n            msg\n          }\n        });\n        return;\n      }\n\n      localStorage.setItem('token', data.token); // Redirigirlo al index\n\n      this.props.history.replace('/index');\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: this.props.openModal,\n      children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n        style: {\n          display: 'block'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            float: 'right'\n          },\n          onClick: () => this.handleCloseModal(),\n          children: \"X\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"name\",\n            children: \"Ingrese su c\\xF3digo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            onChange: this.handleChangeInput,\n            value: this.state.code\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }, this), this.state.error.show && /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"alert alert-danger my-3\",\n          role: \"alert\",\n          children: this.state.error.msg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success\",\n          onClick: () => this.handleVerifyCode(),\n          children: \"Verificar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger\",\n          onClick: () => this.handleCloseModal(),\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(VerifyPhoneCodeModal);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["C:/Users/m_jim/Desktop/isw711/frontend/src/components/VerifyPhoneCodeModal.js"],"names":["Modal","ModalBody","ModalFooter","ModalHeader","React","Component","verifyPhoneCode","withRouter","VerifyPhoneCodeModal","state","code","error","show","msg","handleChangeInput","e","setState","target","value","handleCloseModal","props","handleVerifyCode","trim","data","email","phoneCode","localStorage","setItem","token","history","replace","render","openModal","display","float"],"mappings":"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","sourcesContent":["import { Modal, ModalBody, ModalFooter, ModalHeader } from 'reactstrap';\r\nimport React, { Component } from 'react'\r\nimport { verifyPhoneCode } from '../services/AuthService';\r\nimport { withRouter } from 'react-router';\r\n\r\n\r\nclass VerifyPhoneCodeModal extends Component {\r\n\r\n    state = {\r\n        code: '',\r\n        error: { show: false, msg: '' },\r\n    }\r\n\r\n    handleChangeInput = (e) => {\r\n        this.setState({ code: e.target.value });\r\n    }\r\n\r\n    handleCloseModal = () => {\r\n        this.props.handleCloseModal();\r\n    }\r\n\r\n    handleVerifyCode = async () => {\r\n        await this.setState({ error: { show: false, msg: '' } });\r\n\r\n        const { code } = this.state;\r\n        if (!code || code.trim() === '') {\r\n            return;\r\n        }\r\n\r\n        const { error, data, msg } = await verifyPhoneCode({\r\n            email: this.props.email,\r\n            phoneCode: code\r\n        });\r\n\r\n        if (error) {\r\n            this.setState({ error: { show: true, msg } });\r\n            return;\r\n        }\r\n        \r\n        localStorage.setItem('token', data.token);\r\n        // Redirigirlo al index\r\n        this.props.history.replace('/index');\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal isOpen={this.props.openModal}>\r\n                <ModalHeader style={{ display: 'block' }}>\r\n                    <span style={{ float: 'right' }} onClick={() => this.handleCloseModal()}>X</span>\r\n                </ModalHeader>\r\n                <ModalBody>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"name\">Ingrese su c√≥digo</label>\r\n                        <input className=\"form-control\" onChange={this.handleChangeInput} value={this.state.code} />\r\n                    </div>\r\n                    {\r\n                        this.state.error.show &&\r\n                        <div class=\"alert alert-danger my-3\" role=\"alert\">\r\n                            {this.state.error.msg}\r\n                        </div>\r\n                    }\r\n                </ModalBody>\r\n                <ModalFooter>\r\n                    <button className=\"btn btn-success\" onClick={() => this.handleVerifyCode()}>\r\n                        Verificar\r\n                    </button>\r\n                    <button className=\"btn btn-danger\" onClick={() => this.handleCloseModal()}>Cancelar</button>\r\n                </ModalFooter>\r\n            </Modal>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(VerifyPhoneCodeModal);"]},"metadata":{},"sourceType":"module"}