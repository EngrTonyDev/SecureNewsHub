{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\m_jim\\\\Desktop\\\\isw711\\\\frontend\\\\src\\\\pages\\\\Source.js\";\nimport React, { Component } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEdit, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\nimport { Modal, ModalBody, ModalFooter } from 'reactstrap';\nimport NavbarCover from '../comun/navbar';\nimport { getCategories } from '../services/CategoryService';\nimport { createSource, deleteSource, getSources, updateSource } from '../services/SourceService';\nimport { decodeToken } from '../utils/auth';\nimport Loading from '../components/Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Sources extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      categories: [],\n      data: [],\n      addEditModal: false,\n      modalDelate: false,\n      isLoading: false,\n      sourceSelected: null,\n      form: {\n        name: '',\n        url: '',\n        category_id: '',\n        user_id: ''\n      }\n    };\n\n    this.gettingCategories = async () => {\n      this.setState({\n        isLoading: true\n      });\n      const {\n        data,\n        error\n      } = await getCategories();\n\n      if (!error) {\n        this.setState({\n          categories: data\n        });\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    };\n\n    this.gettingSources = async () => {\n      this.setState({\n        isLoading: true\n      });\n      const {\n        data,\n        error\n      } = await getSources();\n\n      if (!error) {\n        this.setState({\n          data\n        });\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    };\n\n    this.handleCloseAddEditModal = () => {\n      this.setState({\n        addEditModal: false,\n        sourceSelected: null,\n        form: {\n          name: '',\n          url: '',\n          category_id: '',\n          user_id: ''\n        }\n      });\n    };\n\n    this.handleOpenAddEditModal = source => {\n      if (source) {\n        this.setState({\n          addEditModal: true,\n          sourceSelected: source,\n          form: { ...source,\n            category_id: source.category._id,\n            user_id: source.user._id\n          }\n        });\n      } else {\n        this.setState({\n          addEditModal: true,\n          sourceSelected: null\n        });\n      }\n    };\n\n    this.handleOpenDelete = source => {\n      this.setState({\n        modalDelate: true,\n        sourceSelected: source\n      });\n    };\n\n    this.handleCloseDelete = () => {\n      this.setState({\n        modalDelate: false,\n        sourceSelected: null\n      });\n    };\n\n    this.handleDelete = async () => {\n      this.setState({\n        isLoading: true\n      });\n      const {\n        error\n      } = await deleteSource(this.state.sourceSelected);\n\n      if (!error) {\n        await this.gettingSources();\n        this.handleCloseDelete();\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        form: { ...this.state.form,\n          [e.target.name]: e.target.value\n        }\n      });\n    };\n\n    this.postSource = async e => {\n      e.preventDefault();\n      this.setState({\n        isLoading: true\n      });\n      const user = decodeToken();\n      const {\n        error\n      } = await createSource({ ...this.state.form,\n        user_id: user._id\n      });\n\n      if (!error) {\n        await this.gettingSources();\n        this.handleCloseAddEditModal();\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    };\n\n    this.putSource = async e => {\n      e.preventDefault();\n      const {\n        error\n      } = await updateSource(this.state.form);\n\n      if (!error) {\n        await this.gettingSources();\n        this.handleCloseAddEditModal();\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.gettingCategories();\n    this.gettingSources();\n  }\n\n  render() {\n    const {\n      isLoading,\n      sourceSelected,\n      form,\n      categories\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(NavbarCover, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-success my-5\",\n        onClick: () => this.handleOpenAddEditModal(),\n        children: \"Agregar Recurso\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 5\n      }, this), isLoading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 7\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table \",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Nombre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Categor\\xEDa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Acciones\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 10\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.state.data.map(source => {\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: source.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 12\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: source.category.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 12\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-primary\",\n                  onClick: () => this.handleOpenAddEditModal(source),\n                  children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                    icon: faEdit\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 14\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger ms-2\",\n                  onClick: () => this.handleOpenDelete(source),\n                  children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                    icon: faTrashAlt\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 14\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 12\n              }, this)]\n            }, source._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 11\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: this.state.addEditModal,\n        children: [/*#__PURE__*/_jsxDEV(ModalBody, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"name\",\n              children: \"Nombre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              name: \"name\",\n              id: \"name\",\n              onChange: this.handleChange,\n              value: form.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"url\",\n              children: \"URL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              name: \"url\",\n              id: \"url\",\n              onChange: this.handleChange,\n              value: form.url\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"category_id\",\n              children: \"Categor\\xEDa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: form.category_id,\n              onChange: this.handleChange,\n              name: \"category_id\",\n              className: \"form-control\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Ninguna\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 9\n              }, this), categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: category._id,\n                children: category.name\n              }, category._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 37\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: this.handleCloseAddEditModal,\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `btn btn-${sourceSelected ? 'info' : 'success'} ms-3`,\n            onClick: sourceSelected ? this.putSource : this.postSource,\n            children: sourceSelected ? 'Actualizar' : 'Insertar'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: this.state.modalDelate,\n        children: [/*#__PURE__*/_jsxDEV(ModalBody, {\n          children: \"Est\\xE1s seguro que deseas eliminar el recurso?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: this.handleDelete,\n            children: \"S\\xED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            onClick: this.handleCloseDelete,\n            children: \"No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default Sources;","map":{"version":3,"sources":["C:/Users/m_jim/Desktop/isw711/frontend/src/pages/Source.js"],"names":["React","Component","FontAwesomeIcon","faEdit","faTrashAlt","Modal","ModalBody","ModalFooter","NavbarCover","getCategories","createSource","deleteSource","getSources","updateSource","decodeToken","Loading","Sources","state","categories","data","addEditModal","modalDelate","isLoading","sourceSelected","form","name","url","category_id","user_id","gettingCategories","setState","error","gettingSources","handleCloseAddEditModal","handleOpenAddEditModal","source","category","_id","user","handleOpenDelete","handleCloseDelete","handleDelete","handleChange","e","target","value","postSource","preventDefault","putSource","componentDidMount","render","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faEdit, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { Modal, ModalBody, ModalFooter } from 'reactstrap';\r\nimport NavbarCover from '../comun/navbar';\r\nimport { getCategories } from '../services/CategoryService';\r\nimport { createSource, deleteSource, getSources, updateSource } from '../services/SourceService';\r\nimport { decodeToken } from '../utils/auth';\r\nimport Loading from '../components/Loading';\r\n\r\nclass Sources extends Component {\r\n\r\n\tstate = {\r\n\t\tcategories: [],\r\n\t\tdata: [],\r\n\t\taddEditModal: false,\r\n\t\tmodalDelate: false,\r\n\t\tisLoading: false,\r\n\t\tsourceSelected: null,\r\n\t\tform: {\r\n\t\t\tname: '',\r\n\t\t\turl: '',\r\n\t\t\tcategory_id: '',\r\n\t\t\tuser_id: ''\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.gettingCategories();\r\n\t\tthis.gettingSources();\r\n\t}\r\n\r\n\tgettingCategories = async () => {\r\n\t\tthis.setState({ isLoading: true });\r\n\t\tconst { data, error } = await getCategories();\r\n\t\tif (!error) {\r\n\t\t\tthis.setState({ categories: data })\r\n\t\t}\r\n\t\tthis.setState({ isLoading: false });\r\n\t}\r\n\r\n\tgettingSources = async () => {\r\n\t\tthis.setState({ isLoading: true });\r\n\t\tconst { data, error } = await getSources();\r\n\t\tif (!error) {\r\n\t\t\tthis.setState({ data })\r\n\t\t}\r\n\t\tthis.setState({ isLoading: false });\r\n\t}\r\n\r\n\thandleCloseAddEditModal = () => {\r\n\t\tthis.setState({\r\n\t\t\taddEditModal: false, sourceSelected: null,\r\n\t\t\tform: {\r\n\t\t\t\tname: '',\r\n\t\t\t\turl: '',\r\n\t\t\t\tcategory_id: '',\r\n\t\t\t\tuser_id: ''\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\thandleOpenAddEditModal = (source) => {\r\n\t\tif (source) {\r\n\t\t\tthis.setState({ addEditModal: true, sourceSelected: source, form: { ...source, category_id: source.category._id, user_id: source.user._id } });\r\n\t\t} else {\r\n\t\t\tthis.setState({ addEditModal: true, sourceSelected: null });\r\n\t\t}\r\n\t}\r\n\r\n\thandleOpenDelete = (source) => {\r\n\t\tthis.setState({ modalDelate: true, sourceSelected: source });\r\n\t}\r\n\r\n\thandleCloseDelete = () => {\r\n\t\tthis.setState({ modalDelate: false, sourceSelected: null });\r\n\t}\r\n\r\n\thandleDelete = async () => {\r\n\t\tthis.setState({ isLoading: true });\r\n\t\tconst { error } = await deleteSource(this.state.sourceSelected);\r\n\t\tif (!error) {\r\n\t\t\tawait this.gettingSources();\r\n\t\t\tthis.handleCloseDelete();\r\n\t\t}\r\n\t\tthis.setState({ isLoading: false });\r\n\t}\r\n\r\n\thandleChange = (e) => {\r\n\t\tthis.setState({ form: { ...this.state.form, [e.target.name]: e.target.value, } })\r\n\t}\r\n\r\n\tpostSource = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tthis.setState({ isLoading: true });\r\n\t\tconst user = decodeToken();\r\n\t\tconst { error } = await createSource({ ...this.state.form, user_id: user._id });\r\n\t\tif (!error) {\r\n\t\t\tawait this.gettingSources();\r\n\t\t\tthis.handleCloseAddEditModal();\r\n\t\t}\r\n\t\tthis.setState({ isLoading: false });\r\n\t}\r\n\r\n\tputSource = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tconst { error } = await updateSource(this.state.form);\r\n\t\tif (!error) {\r\n\t\t\tawait this.gettingSources();\r\n\t\t\tthis.handleCloseAddEditModal();\r\n\t\t}\r\n\t\tthis.setState({ isLoading: false });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { isLoading, sourceSelected, form, categories } = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<NavbarCover />\r\n\t\t\t\t<button className=\"btn btn-success my-5\" onClick={() => this.handleOpenAddEditModal()}>Agregar Recurso</button>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t<Loading />\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<table className=\"table \">\r\n\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th>Nombre</th>\r\n\t\t\t\t\t\t\t\t\t<th>Categoría</th>\r\n\t\t\t\t\t\t\t\t\t<th>Acciones</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t{this.state.data.map((source) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<tr key={source._id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>{source.name}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>{source.category.name}</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.handleOpenAddEditModal(source)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faEdit} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-danger ms-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.handleOpenDelete(source)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon={faTrashAlt} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t}\r\n\t\t\t\t<Modal isOpen={this.state.addEditModal}>\r\n\t\t\t\t\t<ModalBody>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"name\">Nombre</label>\r\n\t\t\t\t\t\t\t<input className=\"form-control\" name=\"name\" id=\"name\" onChange={this.handleChange} value={form.name} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"url\">URL</label>\r\n\t\t\t\t\t\t\t<input className=\"form-control\" name=\"url\" id=\"url\" onChange={this.handleChange} value={form.url} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t<label htmlFor=\"category_id\">Categoría</label>\r\n\t\t\t\t\t\t\t<select value={form.category_id} onChange={this.handleChange} name=\"category_id\" className=\"form-control\">\r\n\t\t\t\t\t\t\t\t<option value=\"\">Ninguna</option>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcategories.map(category => <option key={category._id} value={category._id}>{category.name}</option>)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</ModalBody>\r\n\r\n\t\t\t\t\t<ModalFooter>\r\n\t\t\t\t\t\t<button className=\"btn btn-danger\" onClick={this.handleCloseAddEditModal}>Cancelar</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName={`btn btn-${sourceSelected ? 'info' : 'success'} ms-3`}\r\n\t\t\t\t\t\t\tonClick={sourceSelected ? this.putSource : this.postSource}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{sourceSelected ? 'Actualizar' : 'Insertar'}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</ModalFooter>\r\n\t\t\t\t</Modal>\r\n\r\n\r\n\t\t\t\t<Modal isOpen={this.state.modalDelate}>\r\n\t\t\t\t\t<ModalBody>\r\n\t\t\t\t\t\tEstás seguro que deseas eliminar el recurso?\r\n        \t\t\t</ModalBody>\r\n\t\t\t\t\t<ModalFooter>\r\n\t\t\t\t\t\t<button className=\"btn btn-danger\" onClick={this.handleDelete}>Sí</button>\r\n\t\t\t\t\t\t<button className=\"btn btn-secondary\" onClick={this.handleCloseDelete}>No</button>\r\n\t\t\t\t\t</ModalFooter>\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\nexport default Sources;"]},"metadata":{},"sourceType":"module"}