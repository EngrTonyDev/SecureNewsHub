{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\m_jim\\\\Desktop\\\\isw711\\\\frontend\\\\src\\\\pages\\\\Categories.js\";\nimport React, { Component } from 'react';\nimport NavbarCover from '../comun/navbar';\nimport Loading from '../components/Loading';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEdit, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\nimport { createCategory, deleteCategory, getCategories, updateCategory } from '../services/CategoryService';\nimport { Modal, ModalBody, ModalFooter } from 'reactstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Categories extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      addEditModal: false,\n      modalDelate: false,\n      isLoading: false,\n      categorySelected: null,\n      form: {\n        name: ''\n      }\n    };\n\n    this.gettingCategories = async () => {\n      this.setState({\n        isLoading: true\n      });\n      const {\n        data,\n        error\n      } = await getCategories();\n\n      if (!error) {\n        this.setState({\n          data\n        });\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    };\n\n    this.handleCloseAddEditModal = () => {\n      this.setState({\n        addEditModal: false,\n        categorySelected: null,\n        form: {\n          name: ''\n        }\n      });\n    };\n\n    this.handleOpenAddEditModal = category => {\n      if (category) {\n        this.setState({\n          addEditModal: true,\n          categorySelected: category,\n          form: category\n        });\n      } else {\n        this.setState({\n          addEditModal: true,\n          categorySelected: null\n        });\n      }\n    };\n\n    this.handleOpenDelete = category => {\n      this.setState({\n        modalDelate: true,\n        categorySelected: category\n      });\n    };\n\n    this.handleCloseDelete = () => {\n      this.setState({\n        modalDelate: false,\n        categorySelected: null\n      });\n    };\n\n    this.handleDelete = async () => {\n      this.setState({\n        isLoading: true\n      });\n      const {\n        error\n      } = await deleteCategory(this.state.categorySelected);\n\n      if (!error) {\n        await this.gettingCategories();\n        this.handleCloseDelete();\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        form: { ...this.state.form,\n          name: e.target.value\n        }\n      });\n    };\n\n    this.postCategories = async e => {\n      e.preventDefault();\n      this.setState({\n        isLoading: true\n      });\n      const {\n        error\n      } = await createCategory(this.state.form);\n\n      if (!error) {\n        await this.gettingCategories();\n        this.handleCloseAddEditModal();\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    };\n\n    this.putCategories = async e => {\n      e.preventDefault();\n      const {\n        error\n      } = await updateCategory(this.state.form);\n\n      if (!error) {\n        await this.gettingCategories();\n        this.handleCloseAddEditModal();\n      }\n\n      this.setState({\n        isLoading: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.gettingCategories();\n  }\n\n  render() {\n    const {\n      isLoading,\n      categorySelected,\n      form\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(NavbarCover, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-success my-5\",\n        onClick: () => this.handleOpenAddEditModal(),\n        children: \"Agregar Categor\\xEDa\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), isLoading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Nombre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Acciones\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.state.data.map(category => {\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: category.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-primary\",\n                  onClick: () => this.handleOpenAddEditModal(category),\n                  children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                    icon: faEdit\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger ms-2\",\n                  onClick: () => this.handleOpenDelete(category),\n                  children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                    icon: faTrashAlt\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 45\n              }, this)]\n            }, category._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 41\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: this.state.addEditModal,\n        children: [/*#__PURE__*/_jsxDEV(ModalBody, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"name\",\n              children: \"Nombre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              name: \"name\",\n              id: \"name\",\n              required: true,\n              onChange: this.handleChange,\n              value: form.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: this.handleCloseAddEditModal,\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `btn btn-${categorySelected ? 'info' : 'success'} ms-3`,\n            onClick: categorySelected ? this.putCategories : this.postCategories,\n            children: categorySelected ? 'Actualizar' : 'Insertar'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: this.state.modalDelate,\n        children: [/*#__PURE__*/_jsxDEV(ModalBody, {\n          children: \"Est\\xE1s seguro que deseas eliminar a la la categor\\xEDa?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: this.handleDelete,\n            children: \"S\\xED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            onClick: this.handleCloseDelete,\n            children: \"No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Categories;","map":{"version":3,"sources":["C:/Users/m_jim/Desktop/isw711/frontend/src/pages/Categories.js"],"names":["React","Component","NavbarCover","Loading","FontAwesomeIcon","faEdit","faTrashAlt","createCategory","deleteCategory","getCategories","updateCategory","Modal","ModalBody","ModalFooter","Categories","state","data","addEditModal","modalDelate","isLoading","categorySelected","form","name","gettingCategories","setState","error","handleCloseAddEditModal","handleOpenAddEditModal","category","handleOpenDelete","handleCloseDelete","handleDelete","handleChange","e","target","value","postCategories","preventDefault","putCategories","componentDidMount","render","map","_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport NavbarCover from '../comun/navbar';\r\nimport Loading from '../components/Loading';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faEdit, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\r\nimport { createCategory, deleteCategory, getCategories, updateCategory } from '../services/CategoryService';\r\nimport { Modal, ModalBody, ModalFooter } from 'reactstrap';\r\n\r\n\r\nclass Categories extends Component {\r\n\r\n    state = {\r\n        data: [],\r\n        addEditModal: false,\r\n        modalDelate: false,\r\n        isLoading: false,\r\n        categorySelected: null,\r\n        form: {\r\n            name: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.gettingCategories();\r\n    }\r\n\r\n    gettingCategories = async () => {\r\n        this.setState({ isLoading: true });\r\n        const { data, error } = await getCategories();\r\n        if (!error) {\r\n            this.setState({ data })\r\n        }\r\n        this.setState({ isLoading: false });\r\n    }\r\n\r\n    handleCloseAddEditModal = () => {\r\n        this.setState({ addEditModal: false, categorySelected: null, form: { name: '' } });\r\n    }\r\n\r\n    handleOpenAddEditModal = (category) => {\r\n        if (category) {\r\n            this.setState({ addEditModal: true, categorySelected: category, form: category });\r\n        } else {\r\n            this.setState({ addEditModal: true, categorySelected: null });\r\n        }\r\n    }\r\n\r\n    handleOpenDelete = (category) => {\r\n        this.setState({ modalDelate: true, categorySelected: category });\r\n    }\r\n\r\n    handleCloseDelete = () => {\r\n        this.setState({ modalDelate: false, categorySelected: null });\r\n    }\r\n\r\n    handleDelete = async () => {\r\n        this.setState({ isLoading: true });\r\n        const { error } = await deleteCategory(this.state.categorySelected);\r\n        if (!error) {\r\n            await this.gettingCategories();\r\n            this.handleCloseDelete();\r\n        }\r\n        this.setState({ isLoading: false });\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        this.setState({ form: { ...this.state.form, name: e.target.value,  } })\r\n    }\r\n\r\n    postCategories = async (e) => {\r\n        e.preventDefault();\r\n        this.setState({ isLoading: true });\r\n        const { error } = await createCategory(this.state.form);\r\n\r\n        if (!error) {\r\n            await this.gettingCategories();\r\n            this.handleCloseAddEditModal();\r\n        }\r\n        this.setState({ isLoading: false });\r\n    }\r\n\r\n    putCategories = async (e) => {\r\n        e.preventDefault();\r\n        const { error } = await updateCategory(this.state.form);\r\n        if (!error) {\r\n            await this.gettingCategories();\r\n            this.handleCloseAddEditModal();\r\n        }\r\n        this.setState({ isLoading: false });\r\n    }\r\n\r\n    render() {\r\n        const { isLoading, categorySelected, form } = this.state; \r\n\r\n        return (\r\n            <div className=\"App\">\r\n                <NavbarCover />\r\n\r\n                <button className=\"btn btn-success my-5\" onClick={() => this.handleOpenAddEditModal()}>Agregar Categoría</button>\r\n\r\n                {\r\n                    isLoading ?\r\n                        <Loading />\r\n                        :\r\n                        <table className=\"table\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Nombre</th>\r\n                                    <th>Acciones</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {this.state.data.map(category => {\r\n                                    return (\r\n                                        <tr key={category._id}>\r\n                                            <td>{category.name}</td>\r\n                                            <td>\r\n                                                <button\r\n                                                    className=\"btn btn-primary\"\r\n                                                    onClick={() => this.handleOpenAddEditModal(category)}\r\n                                                >\r\n                                                    <FontAwesomeIcon icon={faEdit} />\r\n                                                </button>\r\n\r\n                                                <button\r\n                                                    className=\"btn btn-danger ms-2\"\r\n                                                    onClick={() => this.handleOpenDelete(category)}\r\n                                                >\r\n                                                    <FontAwesomeIcon icon={faTrashAlt} />\r\n                                                </button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    )\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                }\r\n\r\n\r\n                <Modal isOpen={this.state.addEditModal}>\r\n                    <ModalBody>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"name\">Nombre</label>\r\n                            <input\r\n                                className=\"form-control\"\r\n                                name=\"name\"\r\n                                id=\"name\"\r\n                                required\r\n                                onChange={this.handleChange}\r\n                                value={form.name}\r\n                            />\r\n                        </div>\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <button className=\"btn btn-danger\" onClick={this.handleCloseAddEditModal}>Cancelar</button>\r\n                        <button\r\n                            className={`btn btn-${categorySelected ? 'info' : 'success'} ms-3`}\r\n                            onClick={categorySelected ? this.putCategories : this.postCategories}\r\n                        >\r\n                            {categorySelected ? 'Actualizar' : 'Insertar'}\r\n                        </button>\r\n                    </ModalFooter>\r\n                </Modal>\r\n\r\n                <Modal isOpen={this.state.modalDelate}>\r\n                    <ModalBody>\r\n                        Estás seguro que deseas eliminar a la la categoría?\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <button className=\"btn btn-danger\" onClick={this.handleDelete}>Sí</button>\r\n                        <button className=\"btn btn-secondary\" onClick={this.handleCloseDelete}>No</button>\r\n                    </ModalFooter>\r\n                </Modal>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default Categories;"]},"metadata":{},"sourceType":"module"}